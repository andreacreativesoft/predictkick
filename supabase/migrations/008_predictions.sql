-- 008_predictions.sql

CREATE TABLE predictions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  fixture_id UUID REFERENCES fixtures(id) UNIQUE,
  home_win_prob DECIMAL(5,2),
  draw_prob DECIMAL(5,2),
  away_win_prob DECIMAL(5,2),
  over_25_prob DECIMAL(5,2),
  under_25_prob DECIMAL(5,2),
  btts_yes_prob DECIMAL(5,2),
  btts_no_prob DECIMAL(5,2),
  predicted_home_goals DECIMAL(4,2),
  predicted_away_goals DECIMAL(4,2),
  predicted_score_home INTEGER,
  predicted_score_away INTEGER,
  top_5_scores JSONB,
  ht_home_win_prob DECIMAL(5,2),
  ht_draw_prob DECIMAL(5,2),
  ht_away_win_prob DECIMAL(5,2),
  confidence_score DECIMAL(5,2),
  data_completeness DECIMAL(5,2),
  factor_weights JSONB,
  factor_details JSONB,
  value_bets JSONB,
  ai_analysis TEXT,
  key_factors JSONB,
  risk_factors JSONB,
  context_applied JSONB,
  weather_impact TEXT,
  injury_impact TEXT,
  fatigue_impact TEXT,
  position_impact TEXT,
  model_version TEXT DEFAULT 'v1.0',
  generated_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
